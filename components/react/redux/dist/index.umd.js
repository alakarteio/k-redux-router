!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@k-redux-router/core"),require("prop-types"),require("react-redux")):"function"==typeof define&&define.amd?define(["exports","react","@k-redux-router/core","prop-types","react-redux"],t):t(e["@k-redux-router/react-redux"]={},e.React,e.kReduxRouterCore,e.PropTypes,e.reactRedux)}(this,function(e,t,r,o,n){"use strict";function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){s(e,t,r[t])})}return e}function c(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}t=t&&t.hasOwnProperty("default")?t.default:t,o=o&&o.hasOwnProperty("default")?o.default:o;const i=(e,o={})=>n=>{var c,i;const{getState:l=(e=>e.ui.router),absolute:a=!1}=o,{getResult:d,getRoute:f,getCurrentRoute:p}=r.selectors(l);return i=c=class extends t.Component{constructor(t,r){super(t,r),s(this,"toShow",()=>{const{store:t}=this.context,r=t.getState();if(!l(r)||!d(r))return void console.error("[k-redux-router] | There is no route found in `state.ui.router.result`");const o=[].concat(e);let n=p(r);if(a){const e=o.includes(n.code);return void(e!==this.state.show&&this.setState(t=>u({},t,{show:e})))}let s=o.includes(n.code);for(;n&&n.parent&&!s;)n=f(n.parent)(r),s=o.includes(n.code);s!==this.state.show&&this.setState(e=>u({},e,{show:s}))}),this.state={show:!1}}componentWillMount(){const{store:e}=this.context;this.unsubscribe=e.subscribe(()=>{this.toShow()}),this.toShow()}componentWillUnmount(){this.unsubscribe()}render(){const{show:e}=this.state;return e?t.createElement(n,this.props):null}},s(c,"displayName",(e=>`router(${e.displayName||e.name||e.constructor&&e.constructor.name||"Unknown"})`)(n)),s(c,"contextTypes",{store:()=>null}),i};i.absolute=((e,t)=>i(e,u({},t,{absolute:!0})));const l=e=>{const{href:r,onClick:o}=e,n=c(e,["href","onClick"]),{className:s,children:u}=n;if(void 0===r)return null;let i="",l=r;return r.base&&(l=r.base),r.compiled&&(l=r.compiled(n)),n.query&&(i=`?${(e=>Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&"))(n.query)}`),l=`${l}${i}`,t.createElement("a",{className:s,href:l,onClick:o},u)};l.propTypes={className:o.string,children:o.node,href:o.oneOfType([o.string,o.shape({base:o.string,compiled:o.func})]),onClick:o.func},l.defaultProps={className:void 0,children:void 0,href:void 0,onClick:void 0};const{getRoute:a}=r.selectors(e=>e.ui.router);var d=n.connect((e,{code:t})=>({href:a(t)(e).href}),(e,t)=>{let{onClick:o,code:n,query:s}=t,u=c(t,["onClick","code","query"]);return{onClick:t=>{o&&o(t),(e=>(e=>!!(e.shiftKey||e.altKey||e.metaKey||e.ctrlKey))(e)||(e=>e.button&&0!==e.button)(e)||e.defaultPrevented)(t)||(e(r.actions.push(n,u,s)),t.preventDefault())}}})(l);e.forRoute=i,e.Link=d,Object.defineProperty(e,"__esModule",{value:!0})});
